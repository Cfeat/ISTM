import{K,s as O,u as R,d,r as q,y as G,e as n,z as H,o as S,c as J,a as g,g as t,w as l,E as y,i as Q,m as r,A as W,j as X,B as Y,C as Z,D as ee}from"./index-9f45e407.js";function te(C){return K({url:"/api/courses",method:"get",params:C})}const le={class:"course-container"},oe={class:"header"},ae={class:"pagination"},ne={__name:"list",setup(C){const m=R(),f=d(!1),c=d(1),_=d(10),b=d(0),k=d([]),s=q({name:"",type:""}),i=async()=>{try{f.value=!0;const o={page:c.value,pageSize:_.value,...s},e=await te(o);k.value=e.data.list,b.value=e.data.total}catch{y.error("获取课程列表失败")}finally{f.value=!1}},h=()=>{c.value=1,i()},w=()=>{Object.keys(s).forEach(o=>{s[o]=""}),h()},B=o=>{_.value=o,i()},E=o=>{c.value=o,i()},$=()=>{m.push("/classroom")},D=o=>{m.push(`/course/detail/${o.id}`)},U=o=>{m.push(`/course/edit/${o.id}`)},L=async o=>{try{await Z.confirm("确定要删除该课程吗？","提示",{type:"warning"}),y.success("删除成功"),i()}catch(e){e!=="cancel"&&y.error("删除失败")}};return G(()=>{i()}),(o,e)=>{const M=n("el-icon"),u=n("el-button"),N=n("el-input"),v=n("el-form-item"),z=n("el-option"),j=n("el-select"),P=n("el-form"),V=n("el-card"),p=n("el-table-column"),T=n("el-tag"),A=n("el-table"),F=n("el-pagination"),I=H("loading");return S(),J("div",le,[g("div",oe,[e[5]||(e[5]=g("h2",{style:{color:"#95d475"}},"课程管理",-1)),t(u,{type:"primary",style:{"background-color":"#95d475","border-color":"#95d475"},onClick:$},{default:l(()=>[t(M,null,{default:l(()=>[t(Q(ee))]),_:1}),e[4]||(e[4]=r("新建课程 "))]),_:1})]),t(V,{class:"search-card"},{default:l(()=>[t(P,{inline:!0,model:s},{default:l(()=>[t(v,{label:"课程名称"},{default:l(()=>[t(N,{modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=a=>s.name=a),placeholder:"请输入课程名称"},null,8,["modelValue"])]),_:1}),t(v,{label:"课程类型"},{default:l(()=>[t(j,{modelValue:s.type,"onUpdate:modelValue":e[1]||(e[1]=a=>s.type=a),placeholder:"请选择课程类型"},{default:l(()=>[t(z,{label:"体育",value:"sports"}),t(z,{label:"健康",value:"health"})]),_:1},8,["modelValue"])]),_:1}),t(v,null,{default:l(()=>[t(u,{type:"primary",onClick:h},{default:l(()=>e[6]||(e[6]=[r("搜索")])),_:1}),t(u,{onClick:w},{default:l(()=>e[7]||(e[7]=[r("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(V,{class:"course-list"},{default:l(()=>[W((S(),X(A,{data:k.value},{default:l(()=>[t(p,{prop:"name",label:"课程名称"}),t(p,{prop:"type",label:"课程类型"}),t(p,{prop:"createTime",label:"创建时间"}),t(p,{prop:"status",label:"状态"},{default:l(({row:a})=>[t(T,{type:a.status==="active"?"success":"info"},{default:l(()=>[r(Y(a.status==="active"?"已发布":"草稿"),1)]),_:2},1032,["type"])]),_:1}),t(p,{label:"操作",width:"200"},{default:l(({row:a})=>[t(u,{link:"",type:"primary",onClick:x=>D(a)},{default:l(()=>e[8]||(e[8]=[r("查看")])),_:2},1032,["onClick"]),t(u,{link:"",type:"primary",onClick:x=>U(a)},{default:l(()=>e[9]||(e[9]=[r("编辑")])),_:2},1032,["onClick"]),t(u,{link:"",type:"danger",onClick:x=>L(a)},{default:l(()=>e[10]||(e[10]=[r("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[I,f.value]]),g("div",ae,[t(F,{"current-page":c.value,"onUpdate:currentPage":e[2]||(e[2]=a=>c.value=a),"page-size":_.value,"onUpdate:pageSize":e[3]||(e[3]=a=>_.value=a),total:b.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:B,onCurrentChange:E},null,8,["current-page","page-size","total"])])]),_:1})])}}},re=O(ne,[["__scopeId","data-v-97fb10c5"]]);export{re as default};
