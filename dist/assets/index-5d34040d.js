import{u as M,b as C,r as T,d as m,e as n,o as w,c as U,f as q,a as r,_ as b,g as s,w as t,h as B,E as i,i as p,j as N,k as R,l as E,m as F,n as L,p as j,v as A,q as D}from"./index-9f45e407.js";const $="/assets/background-39f79d78.svg",z="/assets/wave-6e2db276.svg";const G={class:"login-container"},H={class:"login-form"},J=["src"],P={__name:"index",setup(K){const x=M(),y=C(),o=T({username:"",password:"",code:"",uuid:""}),V={username:[{required:!0,trigger:"blur",message:"请输入账号"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}],code:[{required:!0,trigger:"blur",message:"请输入验证码"},{min:4,max:4,message:"验证码长度必须为4位",trigger:"blur"}]},g=m(!1),_=m(""),f=m(),d=m(!1),u=async()=>{try{const a=await B();a.code===200?(_.value=a.img,o.uuid=a.uuid):i.error("获取验证码失败")}catch(a){console.error("获取验证码失败:",a),i.error("获取验证码失败")}},k=async()=>{f.value&&await f.value.validate(async a=>{if(a){g.value=!0;try{const e=await y.login(o);e.code===200?(x.push({path:"/dashboard"}),i.success("登录成功")):(u(),i.error(e.msg||"登录失败"))}catch(e){console.error("登录失败:",e),u(),i.error(e.message||"登录失败")}finally{g.value=!1}}})};return u(),(a,e)=>{const v=n("el-input"),c=n("el-form-item"),h=n("el-icon"),S=n("el-button"),I=n("el-form");return w(),U("div",G,[e[6]||(e[6]=q('<div class="background"><img src="'+$+'" alt="background"></div><div class="header"><div class="logo-container"><img src="'+b+'" alt="ISTM Logo"></div><div class="title"><h1>ISTM</h1><p>Interactive Sports Teaching Mentor</p></div><div class="subtitle"> ——AI助力体育师范生教学能力提升新范式 </div></div><div class="decorations"><img src="'+z+'" alt="teacher" class="teacher-image"></div>',3)),r("div",H,[e[5]||(e[5]=r("div",{class:"form-header"},[r("div",{class:"title-row"},[r("h1",null,"ISTM"),r("img",{src:b,alt:"ISTM Logo",class:"form-logo"})]),r("p",null,"Interactive Sports Teaching Mentor")],-1)),s(I,{ref_key:"loginFormRef",ref:f,model:o,rules:V},{default:t(()=>[s(c,{prop:"username"},{default:t(()=>[s(v,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=l=>o.username=l),placeholder:"账号","prefix-icon":p(L)},null,8,["modelValue","prefix-icon"])]),_:1}),s(c,{prop:"password"},{default:t(()=>[s(v,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=l=>o.password=l),type:d.value?"text":"password",placeholder:"密码","prefix-icon":p(j)},{suffix:t(()=>[s(h,{class:"cursor-pointer",onClick:e[1]||(e[1]=l=>d.value=!d.value)},{default:t(()=>[(w(),N(R(d.value?p(A):p(D))))]),_:1})]),_:1},8,["modelValue","type","prefix-icon"])]),_:1}),s(c,{prop:"code",class:"code-item"},{default:t(()=>[s(v,{modelValue:o.code,"onUpdate:modelValue":e[3]||(e[3]=l=>o.code=l),placeholder:"验证码",style:{width:"200px"}},null,8,["modelValue"]),r("div",{class:"code-image",onClick:u},[r("img",{src:_.value,alt:"验证码"},null,8,J)])]),_:1}),s(c,null,{default:t(()=>[s(S,{loading:g.value,type:"primary",class:"login-button",onClick:E(k,["prevent"])},{default:t(()=>e[4]||(e[4]=[F(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),e[7]||(e[7]=r("div",{class:"watermark"},"ISTM",-1))])}}};export{P as default};
